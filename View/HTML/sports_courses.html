{% if current_user.is_authenticated %}
    {% extends 'base_signed_in.html' %}
{% else %}
    {% extends 'base.html' %}
{% endif %}

{% block head %}
<title>Sports Courses</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/sports_courses.css') }}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

{% endblock %}

{% block body %}

<div class="course-panel">
      <h2 style="font-family: 'STIXGeneral', serif;font-weight: bold;">Sports Course</h2>
      <br>
      <div class="top-course-div">
        <h5 style="font-family: 'STIXGeneral', serif;font-weight: bold;">Top Courses</h5>
        <ul class="top-course-ul">
          {% for i in range(top_courses|length) %}
          {% set top_course = top_courses[i] %}
          <li class="horizontal" style="margin-right: 20px;margin-top:10px;">
            <a onclick="submit('{{top_course.courseID}}')" class="course-a">
            <div class="course-short-detail-box">
              <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:130px;margin-top:10px;" alt="yoga_image" >
              <ul>
                <li class="name" id="name_{{top_course.name}}" style="font-size: 15px;">{{top_course.name}}</li>
                <li class="trainer" style="font-size: 11px;">{{top_course.trainer}}</li>
                <li class="rating" style="font-size: 11px;">★{{'%0.1f'| format(top_course.rating|float)}}</li>
                <li style="font-size: 13px;">${{'%0.2f'| format(top_course.price|float)}}</li>
              </ul>
            </div>
            </a>
          </li>
          {% endfor %}
        </ul>

      </div>
</div>

<div class="view-courses">
  <div class="course-sort">
    <ul>
      <li><h5 style="font-family: 'STIXGeneral', serif;font-weight: bold;">All Courses</h5></li>
      <br>
      <li>
        <label for="dropdown" style="font-size:14px;font-weight:bold;">Sort by : </label>
        <div class="dropdown" >
          <button class="dropbtn" id="dropbtn">Popularity</button>
          <div class="dropdown-content">
              <a onclick="sort('popularity')">Popularity</a>
              <a onclick="sort('price high to low')">price high to low</a>
              <a onclick="sort('price low to high')">price low to high</a>
              <a onclick="sort('rating high to low')">Rating high to low</a>
              <a onclick="sort('rating low to high')">rating low to high</a>
          </div>
          <form action='/sports_courses/' id="sort_attr_form" method="get">
          <input id="sort_attr" type="text" name="sort_attr" value="" style="display:none;">
          </form>
          <script type="text/javascript">
            function sort(sort_attr) {
              document.getElementById('sort_attr').value = sort_attr;
              document.getElementById('sort_attr_form').submit();
              // $( "#courses-list" ).load(window.location.href + " #courses-list" );
            }
          </script>
        </div>
      </li>
    </ul>
  </div>
      <div class="course-filter">
        <ul>
          <li style="">
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:5px;margin-bottom:0;">
            <h6>Ratings</h6>
          </li>
          <li style="">
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:5px;margin-bottom:0;">
            <h6>Price</h6>
          </li>
          <li style="">
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:5px;margin-bottom:0;">
            <h6>Levels</h6>
          </li>
          <li style="">
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:5px;margin-bottom:0;">
            <h6>Video Duration</h6>
          </li>
        </ul>
      </div>
      <div class="courses-list" id="courses-list">

      <form action='/sports_courses/about_course/' id="selected_course_form" method="get">
        <input id="input" type="text" name="selected_courseID" value="" style="display:none;">

        {% if sort_attribute == 'popularity' %}
          {% for course in courses|sort(attribute='students_count', reverse=True) %}
            <a onclick="submit('{{course.courseID}}')">
        <div class="courses-list-box">
            <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
            <ul class="course-description">
              <li class="name" id="name_{{course.name}}">{{course.name}}</li>
              <li class="description">{{course.short_description}}</li>
              <li class="trainer">{{course.trainer}}</li>
              <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
              <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
            </ul>
            <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
          <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
        </div>
            </a>
          {% endfor %}
        {% elif sort_attribute == 'rating high to low' %}
          {% for course in courses|sort(attribute='rating', reverse = True) %}
            <a onclick="submit('{{course.courseID}}')">
        <div class="courses-list-box">
            <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
            <ul class="course-description">
              <li class="name" id="name_{{course.name}}">{{course.name}}</li>
              <li class="description">{{course.short_description}}</li>
              <li class="trainer">{{course.trainer}}</li>
              <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
              <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
            </ul>
            <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
          <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
        </div>
            </a>
          {% endfor %}
        {% elif sort_attribute == 'rating low to high' %}
          {% for course in courses|sort(attribute='rating', reverse = False) %}
            <a onclick="submit('{{course.courseID}}')">
        <div class="courses-list-box">
            <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
            <ul class="course-description">
              <li class="name" id="name_{{course.name}}">{{course.name}}</li>
              <li class="description">{{course.short_description}}</li>
              <li class="trainer">{{course.trainer}}</li>
              <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
              <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
            </ul>
            <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
          <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
        </div>
            </a>
          {% endfor %}
        {% elif sort_attribute == 'price high to low' %}
          {% for course in courses|sort(attribute='price', reverse = True) %}
            <a onclick="submit('{{course.courseID}}')">
        <div class="courses-list-box">
            <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
            <ul class="course-description">
              <li class="name" id="name_{{course.name}}">{{course.name}}</li>
              <li class="description">{{course.short_description}}</li>
              <li class="trainer">{{course.trainer}}</li>
              <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
              <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
            </ul>
            <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
          <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
        </div>
            </a>
          {% endfor %}
        {% elif sort_attribute == 'price low to high' %}
          {% for course in courses|sort(attribute='price', reverse = False) %}
            <a onclick="submit('{{course.courseID}}')">
          <div class="courses-list-box">
              <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
              <ul class="course-description">
                <li class="name" id="name_{{course.name}}">{{course.name}}</li>
                <li class="description">{{course.short_description}}</li>
                <li class="trainer">{{course.trainer}}</li>
                <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
                <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
              </ul>
              <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
          </div>
            </a>
          {% endfor %}
        {% else %}
          {% for i in range(courses|length) %}
            {% set course = courses[i] %}
            <a onclick="submit('{{course.courseID}}')">
          <div class="courses-list-box">
              <img class="course-image" src="../static/images/yoga_image.png" style="width:auto;height:140px;" alt="yoga_image" >
              <ul class="course-description">
                <li class="name" id="name_{{course.name}}">{{course.name}}</li>
                <li class="description">{{course.short_description}}</li>
                <li class="trainer">{{course.trainer}}</li>
                <li class="trainer" style="color:#1E5D63;font-weight:bold;">{{course.duration}} total hours | For {{course.level}}</li>
                <li class="rating">★{{'%0.1f'| format(course.rating|float)}}</li>
              </ul>
              <div class="price">${{'%0.2f'| format(course.price|float)}}</div>
            <hr style="background-color: #eee;border:none;color: #eee;height: 2px;margin-top:10px;margin-bottom:8;">
          </div>
            </a>
          {% endfor %}
        {% endif %}



        </form>
      </div>
      <script type="text/javascript">
        function submit(id) {
            document.getElementById('input').value = id;
            document.getElementById('selected_course_form').submit();
        }
      </script>
</div>

{% endblock %}
